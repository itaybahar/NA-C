@using Domain_Project.DTOs
@using Blazor_WebAssembly.Services.Interfaces
@using Blazor_WebAssembly.Models.Equipment

@inject IEquipmentService EquipmentService

<h2 class="text-xl font-bold mb-4">הוספת פריט חדש</h2>

<div class="space-y-4 text-white">
    <input class="w-full p-2 bg-zinc-800 rounded-xl" placeholder="שם פריט" @bind="NewItem.Name" />
    <input class="w-full p-2 bg-zinc-800 rounded-xl" placeholder="כמות התחלתית" type="number" @bind="NewItem.Value" />
    <input class="w-full p-2 bg-zinc-800 rounded-xl" placeholder="מיקום אחסון" @bind="NewItem.Status" />

    <button class="px-4 py-2 bg-red-700 text-white rounded-xl" @onclick="AddEquipment">הוסף למערכת</button>

    @if (!string.IsNullOrWhiteSpace(Message))
    {
        <p class="text-green-400 mt-2">@Message</p>
    }
</div>

@code {
    private EquipmentModel NewItem = new();
    private string? Message;

    private async Task AddEquipment()
    {
        if (string.IsNullOrWhiteSpace(NewItem.Name) || NewItem.Value <= 0 || string.IsNullOrWhiteSpace(NewItem.Status))
        {
            Message = "אנא מלא את כל השדות";
            return;
        }

        await EquipmentService.AddEquipmentAsync(NewItem);
        Message = "הפריט נוסף בהצלחה!";
        NewItem = new();
    }
}
